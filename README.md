# üöÄ OLX Parser - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –≤—ã–≥–æ–¥–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ OLX.kz –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å–æ —Å–∫–∏–¥–∫–æ–π –æ—Ç 20% –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram.

## üìã –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π OLX –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ **–£–º–Ω–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º fuzzy matching
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º –∏ —Å—Ç–æ–ø-—Å–ª–æ–≤–∞–º
- ‚úÖ **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —Å —Ñ–æ—Ç–æ –∏ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- ‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ‚úÖ **–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π** - –∫–∞–∂–¥–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –∏ –æ—à–∏–±–æ–∫
- ‚úÖ **–ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º

## üéØ –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

1. –§–æ—Ç–æ –∏ –≤–∏–¥–µ–æ —Ç–µ—Ö–Ω–∏–∫–∞
2. –¢–µ–ª–µ—Ñ–æ–Ω—ã –∏ –∞–∫—Å–µ—Å—Å—É–∞—Ä—ã
3. –ú–æ–±–∏–ª—å–Ω—ã–µ —Ç–µ–ª–µ—Ñ–æ–Ω—ã –∏ —Å–º–∞—Ä—Ç—Ñ–æ–Ω—ã
4. –ö–æ–º–ø—å—é—Ç–µ—Ä—ã –∏ –∫–æ–º–ø–ª–µ–∫—Ç—É—é—â–∏–µ
5. –ü–ª–∞–Ω—à–µ—Ç–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä—ã
6. –ò–≥—Ä—ã –∏ –∏–≥—Ä–æ–≤—ã–µ –ø—Ä–∏—Å—Ç–∞–≤–∫–∏

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:

```env
# Telegram –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)
TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_CHAT_ID=123456789

# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
DISCOUNT_THRESHOLD=0.20          # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–∫–∏–¥–∫–∞ (20%)
MIN_REAL_PRICE=1000              # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞
SCRAPE_INTERVAL_SECONDS=300      # –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏ (5 –º–∏–Ω—É—Ç)

# –°—Ç–æ–ø-—Å–ª–æ–≤–∞ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
IGNORE_WORDS=–±–∏—Ç—ã–π,—Å–ª–æ–º–∞–Ω–Ω—ã–π,–Ω–∞ –∑–∞–ø—á–∞—Å—Ç–∏,–±–µ–∑ —ç–∫—Ä–∞–Ω–∞,–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç,–¥–ª—è —Ä–µ–º–æ–Ω—Ç–∞,—Ä–∞–∑–±–∏—Ç

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DATABASE_URL=sqlite:///olx_parser.db
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ Telegram —Ç–æ–∫–µ–Ω–∞

1. –ù–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ `.env`
4. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `TELEGRAM_CHAT_ID`:
   - –ù–∞–π–¥–∏—Ç–µ [@userinfobot](https://t.me/userinfobot)
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID

### 4. –ò–º–ø–æ—Ä—Ç –±–∞–∑—ã –º–æ–¥–µ–ª–µ–π

```bash
python import_base.py
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç 423 –º–æ–¥–µ–ª–∏ –∏–∑ `base.xlsx` –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

## üöÄ –ó–∞–ø—É—Å–∫

### –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python main.py
```

–ü–∞—Ä—Å–µ—Ä –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, –ø—Ä–æ–≤–µ—Ä—è—è OLX –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è).

### –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

```bash
python main.py --once
```

–í—ã–ø–æ–ª–Ω–∏—Ç –æ–¥–∏–Ω —Ü–∏–∫–ª –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è.

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ base.xlsx                 # –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–æ–¥–µ–ª–µ–π —Å –±–∞–∑–æ–≤—ã–º–∏ —Ü–µ–Ω–∞–º–∏ (423 –º–æ–¥–µ–ª–∏)
‚îú‚îÄ‚îÄ config.py                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ database.py               # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (SQLAlchemy)
‚îú‚îÄ‚îÄ import_base.py            # –ò–º–ø–æ—Ä—Ç –º–æ–¥–µ–ª–µ–π –∏–∑ Excel –≤ –ë–î
‚îú‚îÄ‚îÄ olx_scraper.py            # –ü–∞—Ä—Å–µ—Ä OLX (BeautifulSoup)
‚îú‚îÄ‚îÄ model_matcher.py          # –°–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–π —Å –º–æ–¥–µ–ª—è–º–∏
‚îú‚îÄ‚îÄ price_checker.py          # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–Ω –∏ —Ä–∞—Å—á–µ—Ç —Å–∫–∏–¥–æ–∫
‚îú‚îÄ‚îÄ telegram_notifier.py      # –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –≤ Telegram
‚îú‚îÄ‚îÄ parser_engine.py          # –û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ main.py                   # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ .env                      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é)
‚îî‚îÄ‚îÄ olx_parser.db            # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite —Å —Ç—Ä–µ–º—è —Ç–∞–±–ª–∏—Ü–∞–º–∏:

### `reference_models`
–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –º–æ–¥–µ–ª–µ–π —Å –±–∞–∑–æ–≤—ã–º–∏ —Ü–µ–Ω–∞–º–∏:
- `brand` - –±—Ä–µ–Ω–¥ (Canon, Nikon, Sony –∏ —Ç.–¥.)
- `model_name` - –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
- `base_price` - –±–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞ –≤ —Ç–µ–Ω–≥–µ
- `search_keywords` - –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞
- `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Ç–æ–≤–∞—Ä–∞
- `active` - –∞–∫—Ç–∏–≤–Ω–∞ –ª–∏ –º–æ–¥–µ–ª—å

### `processed_ads`
–ò—Å—Ç–æ—Ä–∏—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π:
- `olx_ad_id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `title`, `price`, `url` - –¥–∞–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `matched_model_id` - ID –Ω–∞–π–¥–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
- `discount_percent` - –ø—Ä–æ—Ü–µ–Ω—Ç —Å–∫–∏–¥–∫–∏
- `notification_sent` - –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

### `scraper_logs`
–õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã –ø–∞—Ä—Å–µ—Ä–∞:
- `category` - –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- `ads_found` - –Ω–∞–π–¥–µ–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- `new_ads` - –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- `good_deals` - –≤—ã–≥–æ–¥–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- `status` - —Å—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

## üîç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

1. **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞**: –±–µ—Ä–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
2. **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç–æ–ø-—Å–ª–æ–≤**: –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ "–±–∏—Ç—ã–π", "—Å–ª–æ–º–∞–Ω–Ω—ã–π" –∏ —Ç.–¥.
3. **–ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**: —Å–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
4. **Fuzzy matching**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º –õ–µ–≤–µ–Ω—à—Ç–µ–π–Ω–∞ –¥–ª—è –Ω–µ—á–µ—Ç–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤**: –ø–æ–∏—Å–∫ –ø–æ –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–∞–º –Ω–∞–ø–∏—Å–∞–Ω–∏—è
6. **–û—Ü–µ–Ω–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è**: –µ—Å–ª–∏ score >= 70%, –º–æ–¥–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞–π–¥–µ–Ω–Ω–æ–π

## üí∞ –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—ã–≥–æ–¥–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

```python
threshold_price = base_price * (1 - 0.20)  # 20% —Å–∫–∏–¥–∫–∞

if ad_price <= threshold_price:
    # –≠—Ç–æ –≤—ã–≥–æ–¥–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ!
    discount = ((base_price - ad_price) / base_price) * 100
```

–ü—Ä–∏–º–µ—Ä:
- –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞: 100,000 ‚Ç∏
- –ü–æ—Ä–æ–≥: 80,000 ‚Ç∏
- –¶–µ–Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è: 75,000 ‚Ç∏
- ‚úÖ –°–∫–∏–¥–∫–∞ 25% - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ!

## üì± –§–æ—Ä–º–∞—Ç Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```
üî• –í–´–ì–û–î–ù–û–ï –ü–†–ï–î–õ–û–ñ–ï–ù–ò–ï!

üì± Canon EOS 80D

üí∞ –¶–µ–Ω–∞: 75000 ‚Ç∏
üìä –ë–∞–∑–æ–≤–∞—è —Ü–µ–Ω–∞: 100000 ‚Ç∏
üéØ –°–∫–∏–¥–∫–∞: 25.0%
üíµ –≠–∫–æ–Ω–æ–º–∏—è: 25000 ‚Ç∏

üìç –ê–ª–º–∞—Ç—ã, –ë–æ—Å—Ç–∞–Ω–¥—ã–∫—Å–∫–∏–π —Ä–∞–π–æ–Ω

üîó [–û—Ç–∫—Ä—ã—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ]

Canon EOS 80D body –≤ –æ—Ç–ª–∏—á–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ —Å–∫–∏–¥–∫–∏

–í `.env`:
```env
DISCOUNT_THRESHOLD=0.30  # 30% –≤–º–µ—Å—Ç–æ 20%
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

```env
SCRAPE_INTERVAL_SECONDS=600  # 10 –º–∏–Ω—É—Ç –≤–º–µ—Å—Ç–æ 5
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–ø-—Å–ª–æ–≤

```env
IGNORE_WORDS=–±–∏—Ç—ã–π,—Å–ª–æ–º–∞–Ω–Ω—ã–π,–Ω–∞ –∑–∞–ø—á–∞—Å—Ç–∏,–±–µ–∑ —ç–∫—Ä–∞–Ω–∞,–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç,—Ç—Ä–µ—Å–Ω—É—Ç,—Ü–∞—Ä–∞–ø–∏–Ω—ã
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞

–í `main.py` –∏–∑–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä `max_pages` –≤ –º–µ—Ç–æ–¥–µ `fetch_ads()`:
```python
ads = self.scraper.fetch_ads(category_url, category_id, max_pages=5)  # –±—ã–ª–æ 3
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –º–æ–¥–µ–ª–µ–π

### –ü—Ä–æ—Å–º–æ—Ç—Ä –º–æ–¥–µ–ª–µ–π

```python
from database import SessionLocal, ReferenceModel

db = SessionLocal()
models = db.query(ReferenceModel).limit(10).all()
for m in models:
    print(f"{m.brand} {m.model_name} - {m.base_price} ‚Ç∏")
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏

```python
from database import SessionLocal, ReferenceModel

db = SessionLocal()
new_model = ReferenceModel(
    brand="Sony",
    model_name="A7 III",
    base_price=250000,
    category="camera",
    search_keywords="sony a7 iii|a7iii|a7 3|sony a73",
    active=True
)
db.add(new_model)
db.commit()
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã

```python
model = db.query(ReferenceModel).filter_by(brand="Canon", model_name="80D").first()
model.base_price = 95000
db.commit()
```

## üìù –õ–æ–≥–∏

–í—Å–µ –ª–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `olx_parser.log`:

```
2024-02-22 15:30:00 - INFO - Starting OLX scraping session
2024-02-22 15:30:05 - INFO - Found 45 ads in foto-video
2024-02-22 15:30:10 - INFO - Matched 'Canon 80D body' to Canon 80D (score: 95)
2024-02-22 15:30:11 - INFO - Good deal found! Price 75000 vs base 100000 (25.0% off)
2024-02-22 15:30:12 - INFO - ‚úì Good deal saved and notified
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ù–µ –ø—Ä–∏—Ö–æ–¥—è—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ –≤ `.env`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –Ω–∞–ø–∏—Å–∞–ª–∏ –±–æ—Ç—É `/start`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `TELEGRAM_CHAT_ID`
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –ù–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –º–æ–¥–µ–ª–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–∞–∑–∞ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞: `python import_base.py`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –º–æ–¥–µ–ª–∏ –∞–∫—Ç–∏–≤–Ω—ã (`active=True`)
3. –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ `search_keywords`
4. –£–º–µ–Ω—å—à–∏—Ç–µ –ø–æ—Ä–æ–≥ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –≤ `model_matcher.py` (—Å—Ç—Ä–æ–∫–∞ —Å `>= 70`)

### –ü–∞—Ä—Å–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏—è

1. OLX –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `olx_scraper.py`
2. –í–æ–∑–º–æ–∂–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ IP - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ–∫—Å–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

## üöÄ –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–µ (Linux/Mac)

### –° –ø–æ–º–æ—â—å—é screen

```bash
screen -S olx_parser
python main.py
# –ù–∞–∂–º–∏—Ç–µ Ctrl+A, –∑–∞—Ç–µ–º D –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è
# screen -r olx_parser –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ä–∞—Ç–Ω–æ
```

### –° –ø–æ–º–æ—â—å—é nohup

```bash
nohup python main.py > output.log 2>&1 &
```

### Systemd service (Linux)

–°–æ–∑–¥–∞–π—Ç–µ `/etc/systemd/system/olx-parser.service`:

```ini
[Unit]
Description=OLX Parser Service
After=network.target

[Service]
Type=simple
User=your_user
WorkingDirectory=/path/to/project
ExecStart=/usr/bin/python3 /path/to/project/main.py
Restart=always

[Install]
WantedBy=multi-user.target
```

–ó–∞–ø—É—Å–∫:
```bash
sudo systemctl enable olx-parser
sudo systemctl start olx-parser
sudo systemctl status olx-parser
```

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```python
from database import SessionLocal, ProcessedAd, ScraperLog
from sqlalchemy import func

db = SessionLocal()

# –í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–π
total = db.query(func.count(ProcessedAd.id)).scalar()

# –ù–∞–π–¥–µ–Ω–æ –≤—ã–≥–æ–¥–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
deals = db.query(ProcessedAd).filter(ProcessedAd.discount_percent >= 20).count()

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
stats = db.query(
    ScraperLog.category,
    func.sum(ScraperLog.good_deals)
).group_by(ScraperLog.category).all()

print(f"Total ads: {total}")
print(f"Good deals: {deals}")
print(f"By category: {stats}")
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` –≤ Git
- ‚úÖ –•—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `.gitignore` –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è `.env` –∏ `*.db`
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install --upgrade -r requirements.txt`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ `olx_parser.log`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `.env`
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å `--once` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –¥–ª—è –ª–∏—á–Ω—ã—Ö –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π.

---

**–£–¥–∞—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞! üöÄ**
